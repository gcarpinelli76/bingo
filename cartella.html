<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>La tua Cartella</title>
    <style>
        body { font-family: sans-serif; background-color: #1e3a3a; color: white; text-align: center; padding: 20px; }
        .cartella { display: grid; grid-template-columns: repeat(9, 1fr); gap: 2px; background: #000; border: 2px solid #000; margin: 20px auto; max-width: 500px; }
        .cella { aspect-ratio: 1/1; background: #fff; color: #000; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 24px; }
        .vuota { background: #263238; }
    </style>
</head>
<body>
    <h1 id="titolo">CARTELLA</h1>
    <div id="griglia" class="cartella"></div>
    <script>
        const params = new URLSearchParams(window.location.search);
        const id = params.get('id');
        const dataParam = params.get('data');
        let dati;

        // Recupero numeri dal link (per il telefono del cliente) [cite: 2026-02-12]
        if (dataParam) {
            dati = JSON.parse(decodeURIComponent(dataParam));
        } else {
            const archivio = JSON.parse(localStorage.getItem('archivioBingo1000'));
            if (id && archivio) dati = archivio[id - 1];
        }

        if (dati) {
            document.getElementById('titolo').innerText = "CARTELLA N. " + id;
            const griglia = document.getElementById('griglia');
            for (let r = 0; r < 3; r++) {
                for (let c = 0; c < 9; c++) {
                    const div = document.createElement('div');
                    div.className = 'cella';
                    if (dati[r][c] === null) div.classList.add('vuota');
                    else div.innerText = dati[r][c];
                    griglia.appendChild(div);
                }
            }
        } else {
            document.body.innerHTML = "<h1>Cartella non trovata</h1><p>Richiedi un nuovo link.</p>";
        }
    </script>
</body>
</html>
